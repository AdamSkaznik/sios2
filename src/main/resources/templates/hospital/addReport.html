<!DOCTYPE html>
<html xmlns:th="https://www.thymeleaf.org" xmlns:sd="http://www.w3.org/1999/xhtml"
      xmlns:sec="http://www.w3.org/1999/xhtml"
      th:replace="~{/hospital/fragments/layout2::layout(~{::.container-fluid})}">
<head>
    <meta charset="UTF-8">
</head>
<body>
<div class="container-fluid" style="padding-top: 70px">

<!--      <div class="panel">-->
<!--          <div class="panel-heading"> Nowy raport</div>-->
<!--          <div class="panel-body">-->

<!--              <br>-->
<!--              <table class="table table-bordered table-striped">-->
<!--                  <tr>-->
<!--                      <th> Nazwa Oddziału</th>-->
<!--                      <th>ID</th>-->
<!--                      <th> Konfig id</th>-->
<!--                      <th> Stan na godzinę 06:00</th>-->
<!--                      <th> Stan na godzinę 14:00</th>-->
<!--                      <th> Stan na godzinę 22:00</th>-->
<!--                  </tr>-->
<!--                  <tr th:each="hospitalConfig : ${hospitalConfigs}">-->
<!--                      <td th:text="${hospitalConfig.branch.name}"></td>-->
<!--                      <td><input th:value="${hospitalConfigs.size()}"></td>-->
<!--                      <td><input th:value="${hospitalConfig.hospitalConfigId}"></td>-->
<!--                       <td><input class="stan1" id="stan1"></td>-->
<!--                      <td><input class="stan2" id="stan2"></td>-->
<!--                      <td><input id="stan3" class="stan3"></td>-->
<!--                  </tr>-->
<!--              </table>-->
<!--          </div>-->
<!--      </div>-->
<form action="submit" method="post" th:object="${hospitalReport}">
    <table class="table table-bordered table-striped">
        <tr>
            <th> Nazwa oddziału</th>
            <th> Config ID</th>
            <th> ID</th>
            <th>Stan na godz. 06:00</th>
            <th>Stan na godz. 14:00</th>
            <th>Stan na godz. 22:00</th>
        </tr>
    <div th:each="hospitalConfig, i: ${hospitalConfigs}">
<!--        <table class="table table-bordered table-striped">-->
<!--            <tr>-->
<!--                <th> Nazwa oddziału</th>-->
<!--                <th> Config ID</th>-->
<!--                <th>Stan na godz. 06:00</th>-->
<!--                <th>Stan na godz. 14:00</th>-->
<!--                <th>Stan na godz. 22:00</th>-->
<!--            </tr>-->
            <tr>
                <td th:text="${hospitalConfig.branch.name}"></td>
                <td><input th:value="${hospitalConfig.hospitalConfigId}"></td>
                <td><input th:value="${i.index}"></td>
                <td><input id="stan1"></td>
                <td><input id="stan2"></td>
                <td><input id="stan3"></td>
            </tr>
        </table>
    </div>
</form>
</div>
</body>
</html>
<script type="text/javascript">
    // window.onload = function newReport();
    document.addEventListener("DOMContentLoaded", newReport);
    function newReport(){
        const now = new Date();
        let hour = now.getHours().toString();
        let min = now.getMinutes().toString();
        let sec = now.getSeconds().toString();
         // let stan1_input = document.getElementsByClassName(".stan1")
        let stan1_input = document.getElementsByName('stan1');
        let stan2_input = document.getElementById("stan2");
        // let stan2_input = document.getElementsByClassName(".stan2");
        let stan3_input = document.getElementById("stan3");
        // let stan3_input = document.getElementsByClassName(".stan3");
        console.log("Hour : " + hour);
        console.log("Min: " + min);
        if(hour >= 0 && hour <=9){
            hour = 0+hour;
        }
        if(min >=0 && min <=9){
            min = 0+min;
        }
        if(sec >= 0 && sec <= 9){
            sec = 0 + sec;
        }
        let testTime = hour+":"+min+":"+sec;
        console.log("testTime: " + testTime );
        let blocked = null;
        if ((testTime  >= '22:00:01') && (testTime <= '06:00:00')){
          blocked = 1;
          stan2_input.readOnly = true;
          stan2_input.style.backgroundColor = "#d3d3d3";
          stan3_input.readOnly = true;
          stan3_input.style.backgroundColor = "#d3d3d3";
          // document.getElementById("stan2").readOnly = true;
          // document.getElementById("stan3").readOnly = true;
        }
        if ((testTime  >= '06:00:01') && (testTime <= '14:00:00')){
            blocked = 2;
            stan1_input.readOnly = true;
            // stan1_input.style.backgroundColor = "grey";
            stan3_input.readOnly = true;
            // stan3_input.style.backgroundColor = "grey";
            // document.getElementById("stan1").readOnly = true;
            // document.getElementById("stan3").readOnly = true;
        }
        if ((testTime  >= '14:00:01') && (testTime <= '22:00:00')){
            blocked = 3;
            stan1_input.readOnly = true;
            stan1_input.style.backgroundColor = "grey";
            stan2_input.readOnly = true;
            stan3_input.style.backgroundColor = "grey";
            // document.getElementById("stan1").readOnly = true;
            // document.getElementById("stan2").readOnly = true;
        }
        console.log("Blocked wynosi: " + blocked);
    };
    // $(function (){
    //     $('#branchName').select2({
    //         language: "pl",
    //         placeholder: "Wybierz...",
    //         theme: "bootstrap4",
    //         selectionCssClass: "form-control",
    //         ajax: {
    //             url: "/api/hospitalConfig/search/v1",
    //             dataType: 'json',
    //             type: 'GET',
    //             data: function (params){
    //                 console.log(params)
    //                 return {
    //                     term: params.term,
    //                     page: params.page || 1,
    //                 }
    //             },
    //             processResults(data) {
    //                 console.log(data)
    //                 return {
    //                     results: $.map(data, function (item){
    //                         return {
    //                             text: item.name,
    //                             id: item.branchId,
    //                         }
    //                     })
    //                 }
    //             }
    //         }
    //     })
    // });
    // $('#branchName').on('change', function (){
    //     $('#branchdId').val($(this).val());
    // });


</script>
